# Отчет о научно-исследовательской работе
 
## Список исполнителей
```
- Антон Агейков - Data Scientist, капитан команды
- Ассем Ибраева - Data Scientist
- Тимофей Акимкин - ML Engineer
- Яна Бучковски - технический писатель
- Татьяна Плевако - DevOps

Куратор: Артем Карасюк
```

## Реферат
```
Пандемия продолжает влиять на страны по всему миру - COVID‐19 затронул 195 стран с при-
мерно 366 млн подтвержденными случаями заболевания (к январю 2022). Понимание динамики
передачи инфекции в каждой стране и прогнозы имеют решающее значение для дальнейших 
действий по борьбе с пандемией. Целью проекта является разработка и визуализация модели, 
которая предсказывает заболеваемость COVID-19.
```
 
## Содержание
 
[1. Термины и определения](#Термины_и_определения)

[2. Обозначения и сокращения](#Обозначения_и_сокращения)

[3. Введение](#Введение)

[4. Основная часть](#Основная_часть)

  [4.1 Обработка данных](#Обработка_данных)
  
  [4.2 CI/CD](#CI_CD)
  
  [4.3 Визуализация](#Визуализация)
  
[5. Заключение](#Заключение)

[6. Список источников](#Источники)

[7. Приложения](#Приложение)

 
## 1. Термины и определения
<a name="Термины_и_определения"></a> 
```
- Датасет - размеченный набор данных.


- Дэшборд (инфопанель) - это аналитическая панель с понятным интерфейсом для интерактивного
взаимодействия с огромным количеством постоянно изменяющихся показателей.


- Отставание - предполагаемое количество дней до наступления волны заболеваемости COVID-19.


- Последовательность работ (pipeline) - это последовательность стадий, внутри которых 
расположены задачи. Расположены они таким образом, что выход каждого элемента явля-
ется входом следующего.


- Реляционная база - это набор данных с предопределенными связями между ними. Эти данные 
организованы в виде набора таблиц, состоящих из столбцов и строк.


- Степень похожести (сходства) стран - пирсоновская корреляция двух дискретных функциональ-
ных зависимостей прироста количества заболевших в каждой стране. 


- MySQL — свободная реляционная система управления базами данных.
```

## 2. Обозначения и сокращения
<a name="Обозначения_и_сокращения"></a> 
```
- COVID-19 - коронавирусная инфекция 2019 года, вызываемая коронавирусом SARS-CoV-2.


- CI/CD (от англ. Continuous Integration, Continuous Delivery — дословно 
«извлечение, преобразование, загрузка») - это технология автоматизации тестирования
и доставки новых модулей разрабатываемого проекта заинтересованным сторонам.


- ETL (от англ. Extract, Transform, Load — дословно «извлечение, преобразование, за-
грузка») – это процесс извлечения, преобразования и загрузки данных.


- SIR - (от англ. Suspectible, Infected, Removed — дословно «восприимчивые, инфициро-
ванные, выбывашие») - модель из трех дифференциальных уравнений, описывающая изменение
численности трех групп индивидуумов: восприимчивых, инфицированных и выбывших из инфи-
цированных. Данная модель является одной из наиболее распространенных в моделировании
инфекционных заболеваний.
```
 
## 3. Введение
<a name="Введение"></a> 
```
Первым делом была сделана гипотеза о том, что сценарий распространения заболевания в
разных странах имеет сходство. Было решено численно сравнить максимальную схожесть стран
при отставании в несколько дней. В планах было рассчитать степень схожести двух стран, 
исходя из графиков ежедневного прироста заболеваемости в каждой стране. 


Степень схожести определялась как пирсоновская корреляция двух дискретных функциональ-
ных зависимостей прироста количества заболевших в каждой стране. Отобразив полученные
степени схожести стран на географической карте, рассчитывалось найти страны с наиболее
похожим сценарием на сценарий распространения COVID-19 в России. Согласно сделанной гипотезе,
сценарии развития заболеваемости стран с наибольшей степенью схожести с Россией будут с
большой степенью вероятности схожи со сценарием в России, что позволит прогнозировать
заболеваемость.
```
 
## 4. Основная часть
<a name="Основная_часть"></a>
```
Для работы над проектом были выбраны следующие сервисы: ETL, Yandex DataLens.


Работа была разделена на три части:


- обработка данных, ETL – это процесс извлечения, преобразования и загрузки данных;


- ci/cd - доставка кода на сервер;


- визуализация - создание дэшборда в Yandex DataLens с возможностью выбрать страну, визу-
ализировать степень схожести страны с другими, прирост заболеваемости по дням в виде гра-
фика.
```

### 4.1 Обработка данных
<a name="Обработка_данных"></a>
```
Данные о заболеваемости и смертности в разных странах были взяты из открытых источников
(https://github.com/CSSEGISandData/COVID-19 и 
https://github.com/owid/covid-19-data/tree/master/public/data), обработаны (выделены нужные
поля для обработки и визуализации), а затем по этим данным были найдены отставание и степень
схожести для каждой пары стран. 


Как уже было сказано ранее, степень схожести стран была определена как пирсоновская корреляция
двух дискретных функциональных зависимостей прироста количества заболевших в каждой стране. 
Данные выгружались в реляционную базу MySQL и S3-хранилище на Yandex Cloud.
```

### 4.2 CI/CD
<a name="CI_CD"></a>
```
При коммите в репозиторий:
1) Обновляется конфигурация для запуска пайплайна:
    1.1) Обновление секретов.
    1.2) Обновление пакетов python.
2) Запускается пайплайн, который определён в dodo.py:
    2.1) Подкачивает новые данные.
    2.2) Предобрабатывает их для последующей обработки.
    2.3) Высчитывается похожесть стран.
    2.4) Высчитывается предсказание моделей.
    2.5) Загружает все данные в S3.
    2.6) Загружает данные для визуализации в MySQL.
```

### 4.3 Визуализация
<a name="Визуализация"></a>
```
Визуализация предполагала отображение на географической карте степени схожести страны с 
выбранной пользователем из списка и отставание сценария согласно модели. 


Создание географической карты с данными происходило таким образом: на сервисе Yandex 
DataLens создавалось новое подключение к таблице данных из реляционной базы MySQL. 
Далее добавлялся новый датасет на основе таблицы данных, содержащей название страны,
степень схожести, отставание, широту и долготу точки на территории страны. Создава-
лось поле географической координаты при помощи функции `GEOPOINT` от двух аргументов - 
широты и долготы точки. Затем на карте были проставлены точки. 
```
![](https://i.ibb.co/Nm5JFYF/2022-02-04-09-18-34.png)
```
Размер точки отображает степень схожести страны, а цвет - количество дней отставания. 
В качестве цветовой гаммы был выбран непрерывный градиент, цвет каждой точки автомати-
чески определялся сервисом в зависимости от отставания. Также были созданы графики новых
случаев госпитализации пациентов, больных COVID-19 в выбранной стране на протяжении выб-
ранного периода времени, а также график заболеваемости, смертности и вакцинации.
```
 
## 5. Заключение
<a name="Заключение"></a>
```
Гипотеза о том, что сценарий распространения заболевания в разных странах имеет сходство, 
не отвергается, так как модель, основанная на данном предположении работает с точностью, 
равной N%. На основе рассчитанных данных были созданы прогнозы на 30, 60 дней для России 
и ряда других стран. 


Также было выполнено сравнение прогнозов с прогнозами, полученными другими моделями, например, с 
моделью SIR (системы дифференциальных уравнений) и получены удовлетворительные результаты
точности.
```
 
## 6. Список источников
<a name="Источники"></a>
1. [Зараза, гостья наша. Как математика помогает бороться с эпидемиями](https://nplus1.ru/material/2019/12/26/epidemic-math).
3. [Коронавирус: анализ данных без паникерских настроений](https://proglib.io/p/koronavirus-analiz-dannyh-bez-panikerskih-nastroeniy-2020-02-20).
4. [Пандемия COVID-19 глазами математика, или почему классическая модель SEIRD не работает](https://habr.com/ru/post/500348/).
5. [COVID-19: Модель параметрического предсказания эпидемии](https://habr.com/ru/post/507744/).
6. [COVID-19 Data Repository by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University](https://github.com/CSSEGISandData/COVID-19).
7. [Data on COVID-19 (coronavirus) by Our World in Data](https://github.com/owid/covid-19-data/tree/master/public/data).
